
出酒流程
========

1. 接收"酒头控制器"出酒命令
	1)获取酒位信息，即是哪个酒头需要出酒？
	2)需要出多少酒，大杯？中杯？小杯？
	3)一旦获取到出洒命令，将进入下面出酒流程，如果这个过程中再获取到出酒命令，
	  不作处理，直到出酒流程结束

2. 出酒条件判断
	1)出酒权限判断，LCD在没有输入密码的锁屏界面，不允许出酒，LCD进入权限
	  不足的告警界面, 即分杯机已锁定
	2)以上条件满足，LCD进入洒量信息界面，提示哪个酒位需要出酒，并显示剩余洒
	  量杯数
	3)酒量判断，当前酒头位置的酒量少于需要出的酒量，不允许出酒，LCD进入酒量
	  不足的告警界面

3. 执行出酒	
	1)向"压力调节器"发出打开总气阀命令，实时获取"压力调节器"的压力值，
	  并将压力值下发给"酒头控制器"
	2)压力值小于出酒阀值，LCD提示压力不足，出酒失败告警界面
	3)压力值正常,下发出酒命令给"酒头控制器"，并实时获取酒头出酒的洒量，LCD实
	  时更新剩余酒量。

3.出酒结束
     1)实时获取"酒头控制器"出酒完成后(包括吹酒)的状态，如果完成，出酒终止
	2)实时计算本次出酒量，如果超过出酒的需求量，出酒终止
	3)出酒后开始计时，当达到时间上限后，出酒终止
	4)以上情况只要出现一种，都进行出酒终止，并向"压力调节器"发出关闭总气阀
	  命令
	5)退出出酒流程
	
注:
1)如出现告警界面，人为清除后，退出出酒流程,没有人为清除，30秒后自动退出出酒
  流程
2)退出出酒流程后，LCD进入出酒待机状态

 
 
装瓶清洗流程
============
1. 从LCD装瓶清洗界面的“清洗”按钮触发清洗功能

2. 向"压力调节器"发出打开总气阀命令，实时获取"压力调节器"的压力值，
   并将压力值下发给"酒头控制器"
  
3. 压力值小于出酒阀值，LCD提示压力不足，清洗失败告警界面

4. 压力值正常,下发出酒命令给"酒头控制器"， 5秒结束清洗

5. 向"压力调节器"发出关闭总气阀命令，清洗流程结束



装瓶抽真空流程
==============
1. 从LCD装瓶清洗界面的“装瓶”按钮触发装瓶抽真空功能

2. 查询"压力调节器"是否关闭总气阀，如果没关闭就发命令关闭

3. 获取瓶位号，并向对应的"酒头控制器"发出打开气体电磁阀命令，关闭分酒电磁阀命令

3. 向其他瓶位号对应的"酒头控制器"发出关闭气体电磁阀命令，关闭分酒电磁阀命令

4. 向"压力调节器"发出抽真空命令，本步骤可反复多次进行，直到该瓶位内的空气抽干净

5. 完成抽真空后，开启气体总电磁阀，向瓶内注入氮气，获取“压力调节器”压力值
   当压力值不再升高，氮气注入完成
   
7. 向"压力调节器"发命令关闭总气阀

8. 向"酒头控制器"发命令关闭气体电磁阀


温度控制流程
============

1. 开机后实时读取温度传感器值，获取当前环境温度

2. 当温度低于设定值时，启动制冷过程

3. 温度高于设定值时，启动加热过程

   
   




 
 
 
	
